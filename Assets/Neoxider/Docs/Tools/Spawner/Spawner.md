# Spawner

## Введение
`Spawner` — это мощный и гибкий компонент для создания (спавна) игровых объектов. Он тесно интегрирован с `PoolManager`, что делает его одновременно простым в настройке и высокопроизводительным. Этот модуль идеально подходит для создания врагов, бонусов, эффектов и любых других динамически появляющихся объектов.

### Класс Spawner
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Spawner/Spawner.cs`

**Краткое описание**:
Компонент для гибкой настройки и управления процессом спавна игровых объектов.

**Ключевые особенности**:
- Спавн случайных префабов из заданного списка.
- Интеграция с `PoolManager` для оптимизации производительности (можно отключить).
- Автоматическое уничтожение объектов с настраиваемой задержкой.
- Ограничение количества создаваемых объектов (`spawnLimit`).
- Настройка интервалов между спавнами (`minSpawnDelay`, `maxSpawnDelay`).
- Возможность спавна в пределах `Collider` (3D) или `Collider2D` (2D).
- Автоматический запуск спавна при старте сцены (`spawnOnAwake`).
- Удобные кнопки в инспекторе для тестирования (`[Button]`).
- Событие `UnityEvent` для реакции на спавн объекта.
- Диапазоны поворота по осям (Эйлера): три `Vector2` для X/Y/Z.
- Режим поворота: локальный (относительно точки спавна) или мировой.
- Отдельная настройка родителя: при `null` — спавн без родителя.
- Оптимизация: при нулевых диапазонах углов пропускается расчёт случайных значений.

---

### Публичные свойства и поля

| Имя | Тип | Описание |
| --- | --- | --- |
| `prefabs` | `GameObject[]` | Массив префабов, которые могут быть созданы. |
| `destroyDelay` | `float` | Задержка в секундах перед удалением объекта. Если `0`, объект не удаляется автоматически. |
| `spawnLimit` | `int` | Максимальное количество объектов для спавна. Если `0`, спавн бесконечен. |
| `minSpawnDelay` | `float` | Минимальная задержка между автоматическим спавном объектов. |
| `maxSpawnDelay` | `float` | Максимальная задержка между автоматическим спавном объектов. |
| `isSpawning` | `bool` | (Только для чтения) Возвращает `true`, если спавнер в данный момент активен. |
| `SpawnedObjects` | `List<GameObject>` | (Только для чтения) Список всех активных, созданных этим спавнером объектов. |

---

### Публичные методы

| Метод | Возвращаемое значение | Описание |
| --- | --- | --- |
| `StartSpawn()` | `void` | Запускает процесс автоматического спавна объектов. Доступен как кнопка в инспекторе. |
| `StopSpawn()` | `void` | Останавливает процесс автоматического спавна. Доступен как кнопка в инспекторе. |
| `SpawnObjects()` | `IEnumerator` | Корутина, реализующая логику автоматического спавна с задержками. |
| `SpawnRandomObject()` | `GameObject` | Создает случайный префаб из массива `prefabs` в случайной точке спавна. Возвращает созданный объект. Доступен как кнопка в инспекторе. |
| `SpawnById(int prefabId, Vector3 position)` | `GameObject` | Создает префаб по его индексу (`prefabId`) в массиве `prefabs` в указанной `position`. Возвращает созданный объект. |
| `SpawnObject(GameObject prefab, Vector3 position, Quaternion rotation, Transform parent)` | `GameObject` | Основной метод спавна/получения из пула с явными параметрами позиции, поворота и родителя. Возвращает созданный объект. |
| `GetSpawnPosition()` | `Vector3` | Возвращает случайную позицию внутри `_spawnAreaCollider` или `_spawnAreaCollider2D`. Если коллайдеры не заданы, возвращает позицию самого спавнера. |
| `Clear()` | `void` | Останавливает спавн и немедленно удаляет (или возвращает в пул) все созданные объекты. Доступен как кнопка в инспекторе. |
| `GetActiveObjectCount()` | `int` | Возвращает количество активных объектов, созданных спавнером. |

---

### Unity Events

| Событие | Параметры | Описание |
| --- | --- | --- |
| `OnObjectSpawned` | `UnityEvent<GameObject>` | Вызывается каждый раз после успешного создания нового объекта. Передает созданный `GameObject` в качестве параметра. |

---

### Примечания по настройкам инспектора

- Rotation Settings:
  - `Rotation X/Y/Z (Vector2)`: диапазоны углов в градусах для соответствующих осей.
  - `Use Local Rotation (bool)`: локальный (относительно точки спавна) или мировой поворот.
- Parenting:
  - `Parent Transform (Transform)`: родитель создаваемых объектов. Если `null` — объекты остаются без родителя.
  - Родительство применяется после создания; глобальная поза сохраняется (`SetParent(parent, worldPositionStays: true)`).
