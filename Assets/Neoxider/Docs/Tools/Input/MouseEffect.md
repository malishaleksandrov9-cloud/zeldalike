# Компонент Mouse Effect

## 1. Введение

`MouseEffect` — это компонент для создания разнообразных визуальных эффектов, привязанных к курсору мыши. Хотите ли вы, чтобы за курсором тянулся красивый след (`TrailRenderer`), или чтобы при каждом клике появлялись частицы, этот инструмент позволяет легко это настроить.

Он работает в связке с `MouseInputManager`, реагируя на события нажатия, удержания и отпускания кнопки мыши, что делает интерфейс более живым и отзывчивым. Подписки выполняются в `OnEnable`, отписки — в `OnDisable`.

---

## 2. Описание класса

### MouseEffect
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Input/MouseEffect.cs`

**Описание**
Этот компонент прослушивает события от `MouseInputManager` и активирует назначенные визуальные эффекты в позиции курсора. Он может управлять трейлом, объектом-последователем и спавном префабов.

**Ключевые поля**

### Интерактивность
- `interactable` (`bool`, по умолчанию `true`): если выключено, компонент игнорирует события мыши и ничего не делает.
- `disableOnRelease` (`bool`, по умолчанию `true`): если `true`, при отпускании кнопки мыши отключаются `TrailRenderer` и `followObject`. Если `false`, объекты остаются активными (перестают следовать, но не скрываются).

### Источники эффектов
- `trail` (`TrailRenderer`): Ссылка на компонент трейла, который будет следовать за курсором при зажатой кнопке мыши.
- `followObject` (`GameObject`): Ссылка на объект, который будет следовать за курсором.
- `spawnPrefab` (`GameObject`): Префаб, который будет создаваться (спавниться) при определенных действиях мыши.

### Настройки спавна префаба
- `spawnTrigger` (`SpawnTrigger`): Определяет, на какое событие мыши будет спавниться префаб. Варианты:
  - `Press`: При нажатии кнопки.
  - `Hold`: В первый кадр удержания кнопки.
  - `Release`: При отпускании кнопки.
  - `Click`: По событию клика (быстрое нажатие и отпускание).
- `spawnDuringHold`: Если `true`, префаб будет продолжать спавниться с интервалом `holdInterval` все время, пока кнопка мыши зажата.
- `holdInterval`: Интервал в секундах для спавна во время удержания.
- `spawnParent` (`Transform`, опционально): Родитель для создаваемых префабов. Если пусто, префабы создаются внутри текущего объекта (`transform`).
- `spawnLifetime` (`float`, по умолчанию `0`): Автоудаление заспавненных префабов через заданное число секунд. `0` — не удалять.

### Следование
- `followInterval`: Интервал обновления позиции следования (частота обновления эффекта).
- Для `TrailRenderer` используется `emitting` вместо `enabled`, а очистка `Clear()` выполняется при старте следования.

### События (UnityEvent)
- `onStartFollow`: Вызывается при начале следования (нажатие).
- `onStopFollow`: Вызывается при завершении следования (отпускание).
- `onSpawn`: Вызывается при каждом спавне префаба.

---

## 3. Зависимости

- **MouseInputManager**: **Критически важная зависимость!** Этот компонент не работает сам по себе. Он должен находиться на сцене вместе с синглтоном `MouseInputManager`, на события которого он подписывается. Без `MouseInputManager` никаких эффектов не будет.
