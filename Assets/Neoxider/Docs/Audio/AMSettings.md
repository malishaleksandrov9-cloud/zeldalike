# Настройки аудио AMSettings

## 1. Введение

`AMSettings` — это высокоуровневый класс-синглтон для управления глобальными настройками звука в игре. Он служит центральной точкой для включения/выключения музыки и эффектов, а также для регулировки их громкости.

Компонент тесно интегрируется с `AudioMixer`'ом Unity, позволяя управлять громкостью через группы микшера, что является лучшей практикой для менеджмента звука. Он также предоставляет удобные методы-переключатели (toggle) и события для обновления UI.

---

## 2. Описание класса

### AMSettings
- **Пространство имен**: `Neo.Audio`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Audio/AMSettings.cs`

**Описание**
Синглтон для управления глобальными настройками звука, такими как громкость и мьют каналов музыки и эффектов. Автоматически применяет стартовые громкости к `AudioSource`'ам при инициализации.

**Ключевые поля**
- `audioMixer`: Опциональный микшер для управления громкостью через группы
- `MasterVolume`, `MusicVolume`, `EfxVolume`: Имена параметров в микшере для соответствующих каналов
- `startEfxVolume`, `startMusicVolume`: Стартовые громкости для эффектов и музыки (применяются автоматически)
- `efx`, `music`: Ссылки на `AudioSource` для эффектов и музыки
- `IsActiveEfx`, `IsActiveMusic`: Свойства для проверки активности каналов

**Ключевые особенности**
- **Интеграция с микшером**: Позволяет управлять громкостью групп `Master`, `Music` и `Efx` в `AudioMixer`.
- **Стартовые громкости**: Автоматически применяет заданные стартовые громкости (`startEfxVolume`, `startMusicVolume`) к `AudioSource`'ам при инициализации.
- **Простое управление**: Предоставляет простые методы для включения/выключения и регулировки громкости в процентах (от 0.0 до 1.0).
- **Toggle-методы**: Удобные методы для переключения состояния звука (вкл/выкл).
- **События**: Уведомляет другие системы о мьюте музыки или эффектов через `UnityEvent`.

**Публичные методы**
- `SetEfx(bool active)`: Включает/выключает (unmute/mute) канал эффектов. Возвращает `void`.
- `SetMusic(bool active)`: Включает/выключает (unmute/mute) канал музыки. Возвращает `void`.
- `SetMusicAndEfx(bool active)`: Одновременно управляет каналами музыки и эффектов. Возвращает `void`.
- `SetMusicAndEfxVolume(float percent)`: Устанавливает одинаковую громкость для музыки и эффектов. Возвращает `void`.
- `SetMusicVolume(float percent)`: Устанавливает громкость канала музыки (значение от 0.0 до 1.0). Возвращает `void`.
- `SetEfxVolume(float percent)`: Устанавливает громкость канала эффектов (значение от 0.0 до 1.0). Возвращает `void`.
- `SetMasterVolume(float percent)`: Устанавливает общую громкость в микшере. Возвращает `void`.
- `ToggleMusic()`: Переключает состояние мьюта для музыки. Возвращает `void`.
- `ToggleEfx()`: Переключает состояние мьюта для эффектов. Возвращает `void`.
- `ToggleMusicAndEfx()`: Одновременно переключает состояние мьюта для музыки и эффектов. Возвращает `void`.

**Unity Events**
- `OnMuteEfx`: Вызывается при изменении состояния мьюта канала эффектов. Передает `bool` (новое состояние `mute`).
- `OnMuteMusic`: Вызывается при изменении состояния мьюта канала музыки. Передает `bool` (новое состояние `mute`).
